<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Anim Background JS: https://codepen.io/quasimondo/pen/lDdrF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="scripts.js"></script>

    <!--Pusher Event Handler-->
    <script src="https://js.pusher.com/7.0/pusher.min.js"></script>
    <script>
      // Logs all network communication information to console
      Pusher.logToConsole = true;

      // Instantiates a Pusher connection.
      const pusher = new Pusher('072127b07acd646fc5ec',
      {
        cluster: 'eu',
        useTLS: true,
        authEndpoint: 'http://localhost:5000/pusher/auth'
      });

      // Subscribes to the private lobby channel
      const evntReader = pusher.subscribe('private-lobby');

      // Is the function called whenever the my-event event occurs
      evntReader.bind('my-event', function(data){
        alert('An event was triggered with message: ' + data.message);
      });

      // Will send an event to create a server connection, that is either multiplayer or singleplayer
      // isMultiplayer - bool - determines if the game is multiplayer or not
      function createLobby(isMultiplayer)
      {
      	if(isMultiplayer)
      	{
      		// Sends multiplayer event to server
      		evntReader.trigger('client-create lobby',
      			{
      				'message': 'create multiplayer lobby',
      			});
      	}
      	else
      	{
      		// Sends singleplayer event to server
      		evntReader.trigger('client-create lobby',
      			{
      				'message': 'create singleplayer lobby',
      			});
      	}
      }

      // Sends data about the chosen answer.
      function selectAnswer(choice)
      {
        evntReader.trigger('client-choose answer',
          {
            'message': choice,
          });
      }

    </script>

    <!--Vue JS -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <!-- Local CSS -->
    <link rel="stylesheet" type="text/css" href="style.css" />

    <title>Cranehoot!</title>
  </head>

  <!-- BODY -->
  <body id="gradient">
    <div class="container-fluid">
      <h1 class="display-1 col-md-12 text-responsive">Cranehoot!</h1>

      <div class="d-flex justify-content-center" style="height: 100px">
        <!-- Input and buttons need to be replaced with vue components -->
        <form class="main-form col-10 col-sm-8 col-md-6 col-lg-4 col-xl-2">
          <div class="form-group">
            <input
              type="text"
              class="form-control form-control-lg"
              id="colFormLabelLg"
              id="formGroupExampleInput"
              placeholder="USERNAME"
              maxlength="10"
            />
          </div>
          <div class="form-group">
            <input
              type="text"
              class="form-control form-control-lg"
              id="colFormLabelLg"
              id="formGroupExampleInput2"
              placeholder="GAME PIN"
              maxlength="8"
            />
          </div>
          <button type="button" class="btn btn-primary btn-block" onclick="createLobby(false)">
            Singleplayer
          </button>
          <button type="button" class="btn btn-primary btn-block">
            Join Lobby
          </button>
          <button type="button" class="btn btn-primary btn-block" onclick="createLobby(true)">
            Create Lobby
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
